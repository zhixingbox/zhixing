# Historical Comments and Reviews

## Discussion Comments

**@Jenny-Zeng** (Oct 24, 10:26)
@xgopilot å®ç°å°çº¢å¸½ä¸ç°å¤ªç‹¼äº’åŠ¨åŠ¨æ¼«æ¸¸æˆï¼Œæ•…äº‹èƒŒæ™¯
åœ¨ä¸€ä¸ªå……æ»¡é­”æ³•çš„æ£®æ—é‡Œï¼Œå°çº¢å¸½ä¸æ˜¯æ™®é€šçš„å°å¥³å­©ï¼Œè€Œæ˜¯æ£®æ—å®ˆæŠ¤è€…çš„ç»§æ‰¿äººã€‚ç°å¤ªç‹¼ä¹Ÿä¸æ˜¯å•çº¯çš„åè›‹ï¼Œè€Œæ˜¯è¢«é»‘æš—é­”æ³•æ§åˆ¶çš„ç‹¼æ—ç‹å­ã€‚
å®Œæ•´æ•…äº‹å‰§æƒ…
ç¬¬ä¸€å¹•ï¼šå‘½è¿çš„ç›¸é‡
åœºæ™¯1ï¼šæ£®æ—è¾¹ç¼˜çš„å°å±‹
å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½
å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜
å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½
åœºæ™¯2ï¼šé»‘æš—çš„ä¾µè¢­

ç°å¤ªç‹¼è¢«é»‘æš—å·«å¸ˆæ§åˆ¶

æ£®æ—å¼€å§‹å‡ºç°å¼‚å¸¸ç°è±¡

åŠ¨ç‰©ä»¬å˜å¾—ç„¦èºä¸å®‰

ç¬¬äºŒå¹•ï¼šæ„å¤–çš„è”ç›Ÿ
åœºæ™¯3ï¼šç¬¬ä¸€æ¬¡äº¤é”‹

å°çº¢å¸½é€é£Ÿç‰©ç»™å¥¶å¥¶é€”ä¸­é‡åˆ°ç°å¤ªç‹¼

ç°å¤ªç‹¼å¥‰å‘½å¤ºå–å®ˆæŠ¤è€…å¾½ç« 

æˆ˜æ–—ä¸­ï¼Œå°çº¢å¸½å‘ç°ç°å¤ªç‹¼çœ¼ä¸­çš„æŒ£æ‰

åœºæ™¯4ï¼šçœŸç›¸çš„æ­éœ²

å°çº¢å¸½ç”¨å‡€åŒ–é­”æ³•æš‚æ—¶å”¤é†’ç°å¤ªç‹¼

å¾—çŸ¥ç°å¤ªç‹¼æ˜¯è¢«è¿«çš„çœŸç›¸

ä¸¤äººå†³å®šè”æ‰‹å¯¹æŠ—é»‘æš—å·«å¸ˆ

ä½¿ç”¨Xbuilder APIåˆ›å»ºäº†ä¸€ä¸ªäº’åŠ¨æ¸¸æˆï¼ŒåŒ…å«ï¼š
- å°çº¢å¸½è§’è‰²ï¼Œç©å®¶å¯ç”¨æ–¹å‘é”®æ§åˆ¶
- ç°å¤ªç‹¼è§’è‰²ï¼Œä¼šè‡ªåŠ¨è¿½èµ¶å°çº¢å¸½
- çŒäººè§’è‰²ï¼Œ10ç§’åå‡ºç°å¸®åŠ©ç©å®¶
- å°çº¢å¸½å¥¶å¥¶è§’è‰²ï¼Œ
- å®Œæ•´çš„æ¸¸æˆé€»è¾‘å’Œäº‹ä»¶ç³»ç»Ÿ


---

**@xgopilot** (Oct 24, 10:27)
### âœ… å°çº¢å¸½ä¸ç°å¤ªç‹¼äº’åŠ¨æ¸¸æˆå·²å®Œæˆï¼

å·²æˆåŠŸå®ç°åŸºäº spx (GoPlus) æ¸¸æˆå¼•æ“çš„äº’åŠ¨å†’é™©æ¸¸æˆ ğŸ®

#### ğŸ¯ å®ç°å†…å®¹

**æ¸¸æˆè§’è‰²**ï¼ˆ4ä¸ªå®Œæ•´å®ç°ï¼‰:
- **å°çº¢å¸½** - ç©å®¶æ§åˆ¶ï¼Œæ–¹å‘é”®ç§»åŠ¨ + ç©ºæ ¼é”®å‡€åŒ–é­”æ³•
- **ç°å¤ªç‹¼** - AIè‡ªåŠ¨è¿½èµ¶ï¼Œå¯è¢«å‡€åŒ–å”¤é†’æˆä¸ºç›Ÿå‹
- **çŒäºº** - 10ç§’åè‡ªåŠ¨å‡ºç°ï¼Œä¿æŠ¤å°çº¢å¸½
- **å¥¶å¥¶** - æä¾›æ²»ç–—å’Œæ™ºæ…§æŒ‡å¼•

**æ¸¸æˆç³»ç»Ÿ**:
- âš”ï¸ å®Œæ•´æˆ˜æ–—ç³»ç»Ÿï¼ˆç”Ÿå‘½å€¼ã€ä¼¤å®³ã€æ²»ç–—ï¼‰
- âœ¨ å‡€åŒ–ç³»ç»Ÿï¼ˆ5æ¬¡å‡€åŒ–å”¤é†’ç°å¤ªç‹¼ï¼‰
- ğŸ¬ åœºæ™¯ç³»ç»Ÿï¼ˆ4ä¸ªåœºæ™¯ï¼Œ2å¹•å‰§æƒ…ï¼‰
- ğŸ¤– AIç³»ç»Ÿï¼ˆè¿½è¸ªã€ä¿æŠ¤ã€å·¡é€»ï¼‰
- â±ï¸ æ—¶é—´ç³»ç»Ÿï¼ˆå»¶è¿Ÿè§¦å‘ã€å†·å´æœºåˆ¶ï¼‰
- ğŸ’¬ ä¸°å¯Œçš„è§’è‰²å¯¹è¯å’Œå‰§æƒ…æç¤º

**æ“ä½œæ–¹å¼**:
- `â†‘â†“â†â†’` æ§åˆ¶ç§»åŠ¨
- `ç©ºæ ¼` é‡Šæ”¾å‡€åŒ–ä¹‹å…‰
- `Gé”®` æ˜¾ç¤ºæç¤º
- `Hé”®` å¬å”¤çŒäºº

#### ğŸ“ åˆ›å»ºçš„æ–‡ä»¶

```
little-red-riding-hood/
â”œâ”€â”€ main.spx                          # æ¸¸æˆä¸»é€»è¾‘
â”œâ”€â”€ sprites/
â”‚   â”œâ”€â”€ LittleRedRidingHood.spx      # å°çº¢å¸½è§’è‰²
â”‚   â”œâ”€â”€ Wolf.spx                      # ç°å¤ªç‹¼è§’è‰²
â”‚   â”œâ”€â”€ Hunter.spx                    # çŒäººè§’è‰²
â”‚   â””â”€â”€ Grandmother.spx               # å¥¶å¥¶è§’è‰²
â”œâ”€â”€ index.json                        # æ¸¸æˆé…ç½®
â””â”€â”€ README.md                         # è¯¦ç»†è¯´æ˜æ–‡æ¡£
```

#### ğŸ”— Pull Request

PR #7 å·²åˆ›å»º: https://github.com/zhixingbox/zhixing/pull/7

---

**æç¤º**: æ¸¸æˆèµ„æºæ–‡ä»¶ï¼ˆè§’è‰²å›¾ç‰‡ã€èƒŒæ™¯ã€éŸ³æ•ˆï¼‰éœ€è¦æ ¹æ® `index.json` é…ç½®å•ç‹¬å‡†å¤‡å¹¶æ”¾å…¥ `assets/` ç›®å½•ã€‚é…ç½®æ–‡ä»¶ä¸­å·²å®šä¹‰æ‰€éœ€çš„é€ å‹ï¼ˆcostumesï¼‰å’ŒèƒŒæ™¯ï¼ˆbackdropsï¼‰ã€‚

---

**@Jenny-Zeng** (Oct 24, 11:46)
@xgopilot åŸºäºä¸Šè¿°xbuilder apiï¼Œä¼˜åŒ–ä¸‹ä¸‹é¢çš„ä»£ç ï¼Œå¹¶å¦‚ä½•åˆ‡æ¢ä¸‹ä¸€ä¸ªèˆå°
onStart => {
	if distanceTo("redHood1") < 50 {
		say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½ï¼Œå¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜ï¼Œå°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½ "
		stepTo "è‰3"
	}
} /code ä¸€ä¸‹


---

**@xgopilot** (Oct 24, 11:46)
### ä»£ç ä¼˜åŒ–ä¸èˆå°åˆ‡æ¢æŒ‡å—

#### ğŸ“‹ åŸä»£ç é—®é¢˜åˆ†æ

æ‚¨æä¾›çš„ä»£ç ï¼š
```go
onStart => {
	if distanceTo("redHood1") < 50 {
		say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½ï¼Œå¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜ï¼Œå°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½ "
		stepTo "è‰3"
	}
}
```

**å­˜åœ¨çš„é—®é¢˜**ï¼š
1. âŒ `onStart` åªåœ¨æ¸¸æˆå¼€å§‹æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ— æ³•æŒç»­æ£€æµ‹è·ç¦»
2. âŒ å¦‚æœæ¸¸æˆå¼€å§‹æ—¶è·ç¦»ä¸æ»¡è¶³æ¡ä»¶ï¼Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ
3. âŒ å¯¹è¯æ–‡æœ¬è¿‡é•¿ï¼Œå»ºè®®åˆ†æ®µæ˜¾ç¤º
4. âŒ ç¼ºå°‘èˆå°åˆ‡æ¢é€»è¾‘

---

#### âœ… ä¼˜åŒ–åçš„ä»£ç 

```go
onStart => {
    forever => {
        if distanceTo("redHood1") < 50 {
            say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
            wait 2
            say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 2
            wait 2
            say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 2
            
            stepTo "è‰3"
            
            wait 1
            broadcast "scene2"
            
            break
        }
        wait 0.1
    }
}
```

**ä¼˜åŒ–è¦ç‚¹**ï¼š
- âœ… ä½¿ç”¨ `forever` å¾ªç¯æŒç»­æ£€æµ‹è·ç¦»
- âœ… å¯¹è¯æ–‡æœ¬åˆ†æ®µæ˜¾ç¤ºï¼Œæå‡é˜…è¯»ä½“éªŒ
- âœ… ä½¿ç”¨ `wait` æ§åˆ¶å¯¹è¯èŠ‚å¥
- âœ… ä½¿ç”¨ `broadcast "scene2"` è§¦å‘åœºæ™¯åˆ‡æ¢
- âœ… ä½¿ç”¨ `break` è·³å‡ºå¾ªç¯ï¼Œé¿å…é‡å¤è§¦å‘

---

#### ğŸ¬ èˆå°åˆ‡æ¢æ–¹æ³•

æ ¹æ® spx APIï¼Œæœ‰ä»¥ä¸‹å‡ ç§èˆå°ï¼ˆbackdropï¼‰åˆ‡æ¢æ–¹å¼ï¼š

##### æ–¹æ³•1ï¸âƒ£ï¼šæŒ‰åç§°åˆ‡æ¢ï¼ˆæ¨èï¼‰
```go
setBackdrop "scene2_forest"
```

##### æ–¹æ³•2ï¸âƒ£ï¼šæŒ‰ç´¢å¼•åˆ‡æ¢
```go
setBackdrop 1
```

##### æ–¹æ³•3ï¸âƒ£ï¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªèˆå°
```go
setBackdrop Next
setBackdrop Prev
```

##### æ–¹æ³•4ï¸âƒ£ï¼šå¸¦ç­‰å¾…çš„åˆ‡æ¢ï¼ˆä¼šç­‰å¾…ç›¸å…³äº‹ä»¶å¤„ç†å®Œæˆï¼‰
```go
setBackdropAndWait "scene2_forest"
```

---

#### ğŸ¯ å®Œæ•´ç¤ºä¾‹ï¼šåœºæ™¯1åˆ°åœºæ™¯2çš„è¿‡æ¸¡

**å¥¶å¥¶è§’è‰²ä»£ç **ï¼š
```go
onStart => {
    setXYpos -180, 120
    show
    
    forever => {
        if distanceTo("redHood1") < 50 {
            say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
            wait 2
            say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 2
            wait 2
            say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 2
            wait 2
            
            say "å­©å­ï¼Œå»æ£®æ—æ·±å¤„å§", 2
            
            broadcast "switchToScene2"
            
            break
        }
        wait 0.1
    }
}

onMsg "switchToScene2", => {
    say "å°å¿ƒé»‘æš—åŠ›é‡...", 2
}
```

**æ¸¸æˆä¸»åœºæ™¯ä»£ç ï¼ˆmain.spxï¼‰**ï¼š
```go
onStart => {
    setBackdrop "scene1_cottage"
}

onMsg "switchToScene2", => {
    wait 2
    setBackdropAndWait "scene2_dark_forest"
    say "åœºæ™¯2ï¼šé»‘æš—çš„ä¾µè¢­", 3
}

onBackdrop "scene2_dark_forest", => {
    say "æ£®æ—å¼€å§‹å‡ºç°å¼‚å¸¸ç°è±¡...", 2
}
```

---

#### ğŸ® å¤šåœºæ™¯åˆ‡æ¢å®Œæ•´æµç¨‹

```go
onStart => {
    setBackdrop "scene1_cottage"
    currentScene = 1
}

onMsg "toScene2", => {
    setBackdropAndWait "scene2_dark_forest"
    currentScene = 2
    say "åœºæ™¯2ï¼šé»‘æš—çš„ä¾µè¢­", 2
}

onMsg "toScene3", => {
    setBackdropAndWait "scene3_encounter"
    currentScene = 3
    say "åœºæ™¯3ï¼šç¬¬ä¸€æ¬¡äº¤é”‹", 2
}

onMsg "toScene4", => {
    setBackdropAndWait "scene4_truth"
    currentScene = 4
    say "åœºæ™¯4ï¼šçœŸç›¸çš„æ­éœ²", 2
}

onBackdrop backdrop => {
    if backdrop == "scene2_dark_forest" {
        broadcast "scene2Start"
    } else if backdrop == "scene3_encounter" {
        broadcast "scene3Start"
    }
}
```

---

#### ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

1. **ä½¿ç”¨æ¶ˆæ¯å¹¿æ’­è§¦å‘åœºæ™¯åˆ‡æ¢**
   ```go
   broadcast "switchToNextScene"
   ```

2. **åœ¨ä¸»åœºæ™¯ç›‘å¬æ¶ˆæ¯å¹¶åˆ‡æ¢**
   ```go
   onMsg "switchToNextScene", => {
       setBackdropAndWait "nextScene"
   }
   ```

3. **ä½¿ç”¨ `onBackdrop` ç›‘å¬åœºæ™¯åˆ‡æ¢äº‹ä»¶**
   ```go
   onBackdrop "scene2", => {
       // åœºæ™¯2çš„åˆå§‹åŒ–é€»è¾‘
   }
   ```

4. **åˆ†æ®µæ˜¾ç¤ºé•¿å¯¹è¯**
   ```go
   say "ç¬¬ä¸€å¥è¯", 2
   wait 2
   say "ç¬¬äºŒå¥è¯", 2
   ```

5. **ä½¿ç”¨å˜é‡è·Ÿè¸ªå½“å‰åœºæ™¯**
   ```go
   var currentScene = 1
   
   onMsg "nextScene", => {
       currentScene++
       setBackdrop currentScene
   }
   ```

---

#### ğŸ“š ç›¸å…³ API å‚è€ƒ

| API | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| `setBackdrop` | åˆ‡æ¢èƒŒæ™¯ï¼ˆä¸ç­‰å¾…ï¼‰ | `setBackdrop "forest"` |
| `setBackdropAndWait` | åˆ‡æ¢èƒŒæ™¯ï¼ˆç­‰å¾…äº‹ä»¶å®Œæˆï¼‰ | `setBackdropAndWait "forest"` |
| `onBackdrop` | ç›‘å¬èƒŒæ™¯åˆ‡æ¢äº‹ä»¶ | `onBackdrop "forest", => {}` |
| `broadcast` | å¹¿æ’­æ¶ˆæ¯ | `broadcast "scene2"` |
| `broadcastAndWait` | å¹¿æ’­æ¶ˆæ¯ï¼ˆç­‰å¾…å¤„ç†å®Œæˆï¼‰ | `broadcastAndWait "scene2"` |
| `backdropName` | è·å–å½“å‰èƒŒæ™¯åç§° | `backdropName` |
| `backdropIndex` | è·å–å½“å‰èƒŒæ™¯ç´¢å¼• | `backdropIndex` |

---

å¸Œæœ›è¿™äº›ä¼˜åŒ–å»ºè®®å’Œç¤ºä¾‹å¯¹æ‚¨æœ‰å¸®åŠ©ï¼å¦‚æœæœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­æé—®ã€‚ğŸ®

---

**@Jenny-Zeng** (Oct 24, 12:15)
@xgopilot å¦‚ä½•åˆ‡åˆ°èˆå°2onStart => {
	// setXYpos 150, 120
	// show
	play "recording"
	say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
	wait 2
	say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1
	wait 2
	say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 1

	stepTo "è‰3"

	wait 1
	broadcast "scene2"

}

onBackdrop "Scene2", => {
	say "æ£®æ—å¼€å§‹å‡ºç°å¼‚å¸¸ç°è±¡...", 2
}


---

**@Jenny-Zeng** (Oct 24, 12:31)
@xgopilot åŸºäºä¸Šè¿°xbuilder apiï¼Œåˆ‡åˆ°ç¬¬äºŒèˆå°ä»¥åï¼Œå¦‚ä½•è®©ç¬¬ä¸€ä¸ªèˆå°ä¸­çš„ç²¾çµæ¶ˆå¤±ï¼Œå½“åˆ‡åˆ°ç¬¬äºŒèˆå°åï¼Œæ˜¾ç¤ºå…¶ä»–ç²¾çµ



---

**@xgopilot** (Oct 24, 12:31)
### ç²¾çµåœºæ™¯åˆ‡æ¢æ˜¾ç¤º/éšè—æŒ‡å—

#### ğŸ¯ è§£å†³æ–¹æ¡ˆæ¦‚è¿°

åœ¨ä¸åŒèˆå°ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œæ§åˆ¶ç²¾çµçš„æ˜¾ç¤º/éšè—éœ€è¦ä½¿ç”¨ï¼š
1. **`hide`** - éšè—ç²¾çµ
2. **`show`** - æ˜¾ç¤ºç²¾çµ
3. **`onBackdrop`** - ç›‘å¬èˆå°åˆ‡æ¢äº‹ä»¶

---

#### ğŸ’¡ æ–¹æ¡ˆä¸€ï¼šåœ¨ç²¾çµä»£ç ä¸­ç›‘å¬èˆå°åˆ‡æ¢

æ¯ä¸ªç²¾çµç›‘å¬èˆå°åˆ‡æ¢äº‹ä»¶ï¼Œæ ¹æ®å½“å‰èˆå°å†³å®šæ˜¯å¦æ˜¾ç¤ºã€‚

##### åœºæ™¯1çš„ç²¾çµï¼ˆä¾‹å¦‚ï¼šå¥¶å¥¶ï¼‰
```go
onStart => {
    setXYpos -180, 120
    show
}

onBackdrop backdrop => {
    if backdrop == "Scene1" {
        show
    } else {
        hide
    }
}
```

##### åœºæ™¯2çš„ç²¾çµï¼ˆä¾‹å¦‚ï¼šç°å¤ªç‹¼ï¼‰
```go
onStart => {
    setXYpos 150, 50
    hide
}

onBackdrop backdrop => {
    if backdrop == "Scene2" {
        show
    } else {
        hide
    }
}
```

---

#### ğŸ’¡ æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ¶ˆæ¯å¹¿æ’­æ§åˆ¶

é€šè¿‡æ¶ˆæ¯å¹¿æ’­ï¼Œé›†ä¸­æ§åˆ¶å¤šä¸ªç²¾çµçš„æ˜¾ç¤º/éšè—ã€‚

##### æ¸¸æˆä¸»é€»è¾‘ï¼ˆmain.spxï¼‰
```go
onStart => {
    setBackdrop "Scene1"
    broadcast "showScene1Sprites"
}

onMsg "toScene2", => {
    broadcast "hideScene1Sprites"
    wait 0.5
    setBackdropAndWait "Scene2"
    broadcast "showScene2Sprites"
}
```

##### åœºæ™¯1çš„ç²¾çµï¼ˆå¥¶å¥¶ï¼‰
```go
onStart => {
    setXYpos -180, 120
    show
}

onMsg "hideScene1Sprites", => {
    hide
}

onMsg "showScene1Sprites", => {
    show
}
```

##### åœºæ™¯2çš„ç²¾çµï¼ˆç°å¤ªç‹¼ï¼‰
```go
onStart => {
    setXYpos 150, 50
    hide
}

onMsg "showScene2Sprites", => {
    show
    say "æˆ‘è¢«é»‘æš—å·«å¸ˆæ§åˆ¶äº†...", 2
}

onMsg "hideScene2Sprites", => {
    hide
}
```

---

#### ğŸ® å®Œæ•´ç¤ºä¾‹ï¼šå¤šåœºæ™¯ç²¾çµç®¡ç†

##### æ¸¸æˆä¸»é€»è¾‘ï¼ˆmain.spxï¼‰
```go
var currentScene = 1

onStart => {
    setBackdrop "Scene1"
    broadcast "scene1"
}

onMsg "switchToScene2", => {
    broadcast "hideAllSprites"
    wait 0.3
    
    setBackdropAndWait "Scene2"
    currentScene = 2
    
    broadcast "scene2"
    say "åœºæ™¯2ï¼šé»‘æš—çš„ä¾µè¢­", 2
}

onMsg "switchToScene3", => {
    broadcast "hideAllSprites"
    wait 0.3
    
    setBackdropAndWait "Scene3"
    currentScene = 3
    
    broadcast "scene3"
    say "åœºæ™¯3ï¼šç¬¬ä¸€æ¬¡äº¤é”‹", 2
}
```

##### å¥¶å¥¶ç²¾çµï¼ˆScene1ï¼‰
```go
onStart => {
    setXYpos -180, 120
    show
    
    play "recording"
    say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
    wait 2
    say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1
    wait 2
    say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 1
    
    stepTo "è‰3"
    
    wait 1
    broadcast "switchToScene2"
}

onMsg "scene1", => {
    show
}

onMsg "hideAllSprites", => {
    hide
}

onMsg "scene2", => {
    hide
}

onMsg "scene3", => {
    hide
}
```

##### å°çº¢å¸½ç²¾çµï¼ˆæ‰€æœ‰åœºæ™¯éƒ½æ˜¾ç¤ºï¼‰
```go
onStart => {
    setXYpos -150, -50
    show
}

onKey KeyUp, => {
    changeYpos 5
}

onKey KeyDown, => {
    changeYpos -5
}

onKey KeyLeft, => {
    changeXpos -5
}

onKey KeyRight, => {
    changeXpos 5
}

onMsg "scene2", => {
    show
    setXYpos -100, 0
}

onMsg "scene3", => {
    show
    setXYpos 0, 0
}
```

##### ç°å¤ªç‹¼ç²¾çµï¼ˆScene2ã€Scene3æ˜¾ç¤ºï¼‰
```go
onStart => {
    hide
}

onMsg "scene2", => {
    show
    setXYpos 150, 50
    say "æˆ‘å¿…é¡»å¤ºå–å®ˆæŠ¤è€…å¾½ç« ...", 2
    
    forever => {
        turnTo "LittleRedRidingHood"
        step 3
        wait 0.1
    }
}

onMsg "scene3", => {
    show
    setXYpos 100, 100
}

onMsg "scene1", => {
    hide
}
```

##### çŒäººç²¾çµï¼ˆScene3æ˜¾ç¤ºï¼‰
```go
onStart => {
    hide
}

onMsg "scene3", => {
    wait 10
    show
    setXYpos 200, -100
    say "æˆ‘æ¥å¸®åŠ©ä½ ï¼Œå°çº¢å¸½ï¼", 2
    glide -100, -80, 2
}

onMsg "scene1", => {
    hide
}

onMsg "scene2", => {
    hide
}
```

---

#### ğŸ“Š åœºæ™¯ç²¾çµå¯¹ç…§è¡¨

| ç²¾çµ | Scene1 | Scene2 | Scene3 |
|------|--------|--------|--------|
| å¥¶å¥¶ | âœ… æ˜¾ç¤º | âŒ éšè— | âŒ éšè— |
| å°çº¢å¸½ | âœ… æ˜¾ç¤º | âœ… æ˜¾ç¤º | âœ… æ˜¾ç¤º |
| ç°å¤ªç‹¼ | âŒ éšè— | âœ… æ˜¾ç¤º | âœ… æ˜¾ç¤º |
| çŒäºº | âŒ éšè— | âŒ éšè— | âœ… æ˜¾ç¤ºï¼ˆ10ç§’åï¼‰ |
| è‰ã€æ ‘ç­‰è£…é¥° | âœ… æ˜¾ç¤º | âŒ éšè— | âŒ éšè— |

---

#### ğŸ¯ æœ€ä½³å®è·µ

##### 1ï¸âƒ£ ä½¿ç”¨ç»Ÿä¸€çš„æ¶ˆæ¯å‘½å
```go
broadcast "scene1"
broadcast "scene2"
broadcast "scene3"
```

##### 2ï¸âƒ£ æ¯ä¸ªç²¾çµç›‘å¬æ‰€æœ‰åœºæ™¯æ¶ˆæ¯
```go
onMsg "scene1", => {
    show
}

onMsg "scene2", => {
    hide
}

onMsg "scene3", => {
    hide
}
```

##### 3ï¸âƒ£ åˆå§‹åŒ–æ—¶è®¾ç½®æ­£ç¡®çš„çŠ¶æ€
```go
onStart => {
    if currentScene == 1 {
        show
    } else {
        hide
    }
}
```

##### 4ï¸âƒ£ åœºæ™¯åˆ‡æ¢æ—¶å…ˆéšè—å†æ˜¾ç¤º
```go
broadcast "hideAllSprites"
wait 0.3
setBackdropAndWait "Scene2"
broadcast "showScene2Sprites"
```

##### 5ï¸âƒ£ ä½¿ç”¨ `onBackdrop` è‡ªåŠ¨æ§åˆ¶
```go
onBackdrop "Scene2", => {
    show
    setXYpos 100, 100
}

onBackdrop backdrop => {
    if backdrop != "Scene2" {
        hide
    }
}
```

---

#### ğŸ”§ é’ˆå¯¹æ‚¨çš„ä»£ç çš„ä¿®æ”¹å»ºè®®

åŸºäºæ‚¨æä¾›çš„ä»£ç ï¼Œè¿™é‡Œæ˜¯å®Œæ•´çš„ä¿®æ”¹æ–¹æ¡ˆï¼š

##### å¥¶å¥¶ç²¾çµï¼ˆä¿®æ”¹åï¼‰
```go
onStart => {
    setXYpos 150, 120
    show
    
    play "recording"
    say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
    wait 2
    say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1
    wait 2
    say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 1
    
    stepTo "è‰3"
    
    wait 1
    broadcast "switchToScene2"
}

onBackdrop "Scene2", => {
    hide
}

onBackdrop "Scene1", => {
    show
}
```

##### æ¸¸æˆä¸»é€»è¾‘ï¼ˆmain.spxï¼‰
```go
onStart => {
    setBackdrop "Scene1"
}

onMsg "switchToScene2", => {
    wait 1
    setBackdropAndWait "Scene2"
    say "æ£®æ—å¼€å§‹å‡ºç°å¼‚å¸¸ç°è±¡...", 2
    
    broadcast "scene2Start"
}

onBackdrop "Scene2", => {
    say "åœºæ™¯2ï¼šé»‘æš—çš„ä¾µè¢­", 2
}
```

##### åœºæ™¯2çš„æ–°ç²¾çµï¼ˆä¾‹å¦‚ï¼šé»‘æš—æ ‘æ—ï¼‰
```go
onStart => {
    hide
}

onBackdrop "Scene2", => {
    show
    setXYpos 0, 0
}

onBackdrop "Scene1", => {
    hide
}
```

---

#### ğŸ“š ç›¸å…³APIå¿«é€Ÿå‚è€ƒ

| API | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| `show` | æ˜¾ç¤ºç²¾çµ | `show` |
| `hide` | éšè—ç²¾çµ | `hide` |
| `visible` | æ£€æŸ¥ç²¾çµæ˜¯å¦å¯è§ | `if visible { ... }` |
| `onBackdrop` | ç›‘å¬èˆå°åˆ‡æ¢ | `onBackdrop "Scene2", => {}` |
| `broadcast` | å¹¿æ’­æ¶ˆæ¯ | `broadcast "scene2"` |
| `onMsg` | ç›‘å¬æ¶ˆæ¯ | `onMsg "scene2", => {}` |

---

#### ğŸ’¡ å°è´´å£«

1. **ä¼˜å…ˆä½¿ç”¨ `onBackdrop`**ï¼šè¿™æ˜¯æœ€ç›´æ¥çš„æ–¹æ³•ï¼Œæ¯ä¸ªç²¾çµè‡ªåŠ¨å“åº”èˆå°åˆ‡æ¢
2. **ä½¿ç”¨æ¶ˆæ¯å¹¿æ’­**ï¼šé€‚åˆéœ€è¦å¤æ‚é€»è¾‘æˆ–å¤šä¸ªç²¾çµåè°ƒçš„åœºæ™¯
3. **æ·»åŠ è¿‡æ¸¡åŠ¨ç”»**ï¼šåˆ‡æ¢å‰å…ˆ `hide`ï¼Œåˆ‡æ¢åå»¶è¿Ÿ0.3ç§’å† `show`ï¼Œä½¿è¿‡æ¸¡æ›´æµç•…
4. **è®¾ç½®åˆå§‹çŠ¶æ€**ï¼šåœ¨ `onStart` ä¸­æ ¹æ®åœºæ™¯è®¾ç½®æ­£ç¡®çš„æ˜¾ç¤º/éšè—çŠ¶æ€

---

å¸Œæœ›è¿™äº›æ–¹æ¡ˆèƒ½å¸®åŠ©æ‚¨å®ç°åœºæ™¯ç²¾çµçš„å®Œç¾åˆ‡æ¢ï¼å¦‚æœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­æé—®ã€‚ğŸ®

---

**@Jenny-Zeng** (Oct 24, 14:45)
@xgopilot å¦‚ä½•å®ç°ç”±èˆå°2åˆ‡åˆ°èˆå°3
onBackdrop "scene1", => {

}
onStart => {
	say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
	wait 0
	say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1
	wait 0
	say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 1

	stepTo "è‰3"

	//å°çº¢å¸½æ¶ˆå¤±
	//broadcast "scene2"

	setBackdrop "scene2"
	hide
	onBackdrop "scene2", => {
	}



---

**@xgopilot** (Oct 24, 14:45)
### åœºæ™¯2åˆ°åœºæ™¯3åˆ‡æ¢æŒ‡å—

#### âŒ æ‚¨ä»£ç ä¸­çš„é—®é¢˜

æ‚¨æä¾›çš„ä»£ç å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

```go
onStart => {
    say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
    wait 0
    say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1
    wait 0
    say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 1

    stepTo "è‰3"

    setBackdrop "scene2"
    hide
    onBackdrop "scene2", => {    // âŒ é”™è¯¯ï¼šä¸èƒ½åµŒå¥—åœ¨ onStart é‡Œé¢
    }
}
```

**ä¸»è¦é—®é¢˜**ï¼š
1. âŒ **è¯­æ³•é”™è¯¯**ï¼š`onBackdrop` ä¸èƒ½åµŒå¥—åœ¨ `onStart` é‡Œé¢
2. âŒ **wait 0**ï¼š`wait 0` æ²¡æœ‰æ„ä¹‰ï¼Œåº”è¯¥æ˜¯ `wait 1` æˆ– `wait 2`
3. âŒ **ç¼ºå°‘åœºæ™¯3åˆ‡æ¢é€»è¾‘**ï¼šæ²¡æœ‰ä» scene2 åˆ‡æ¢åˆ° scene3 çš„ä»£ç 

---

#### âœ… ä¿®æ­£åçš„å®Œæ•´ä»£ç 

##### æ–¹æ¡ˆ1ï¼šä½¿ç”¨æ¶ˆæ¯å¹¿æ’­ï¼ˆæ¨èï¼‰

**å¥¶å¥¶ç²¾çµï¼ˆScene1ï¼‰**ï¼š
```go
onStart => {
    show
    say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
    wait 2
    say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1
    wait 1
    say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 1
    wait 1
    
    stepTo "è‰3"
    wait 1
    
    broadcast "switchToScene2"
}

onBackdrop "scene2", => {
    hide
}

onBackdrop "scene3", => {
    hide
}
```

**ç°å¤ªç‹¼ç²¾çµï¼ˆScene2 & Scene3ï¼‰**ï¼š
```go
onStart => {
    hide
}

onBackdrop "scene2", => {
    show
    setXYpos 100, 50
    say "æ£®æ—å¼€å§‹å‡ºç°å¼‚å¸¸ç°è±¡...", 2
    wait 2
    say "æˆ‘è¢«é»‘æš—å·«å¸ˆæ§åˆ¶äº†...", 2
    wait 3
    
    broadcast "switchToScene3"
}

onBackdrop "scene3", => {
    show
    setXYpos 150, 100
    say "ç¬¬ä¸€æ¬¡äº¤é”‹ï¼", 2
}

onBackdrop "scene1", => {
    hide
}
```

**å°çº¢å¸½ç²¾çµï¼ˆæ‰€æœ‰åœºæ™¯ï¼‰**ï¼š
```go
onStart => {
    show
    setXYpos -100, -50
}

onKey KeyUp, => {
    changeYpos 5
}

onKey KeyDown, => {
    changeYpos -5
}

onKey KeyLeft, => {
    changeXpos -5
}

onKey KeyRight, => {
    changeXpos 5
}

onBackdrop "scene2", => {
    setXYpos -50, 0
    say "æ£®æ—å˜å¾—å¥½å¥‡æ€ª...", 1
}

onBackdrop "scene3", => {
    setXYpos 0, 0
    say "å‰é¢æœ‰ä»€ä¹ˆä¸œè¥¿ï¼", 1
}
```

**æ¸¸æˆä¸»é€»è¾‘ï¼ˆmain.spxï¼‰**ï¼š
```go
var currentScene = 1

onStart => {
    setBackdrop "scene1"
}

onMsg "switchToScene2", => {
    wait 1
    setBackdropAndWait "scene2"
    currentScene = 2
    say "åœºæ™¯2ï¼šé»‘æš—çš„ä¾µè¢­", 2
}

onMsg "switchToScene3", => {
    wait 1
    setBackdropAndWait "scene3"
    currentScene = 3
    say "åœºæ™¯3ï¼šç¬¬ä¸€æ¬¡äº¤é”‹", 2
}

onBackdrop "scene1", => {
    say "åœºæ™¯1ï¼šæ£®æ—è¾¹ç¼˜çš„å°å±‹", 2
}

onBackdrop "scene2", => {
    say "æ£®æ—å¼€å§‹å‡ºç°å¼‚å¸¸ç°è±¡", 2
}

onBackdrop "scene3", => {
    say "å°çº¢å¸½é‡åˆ°äº†ç°å¤ªç‹¼", 2
}
```

---

#### ğŸ¯ æ–¹æ¡ˆ2ï¼šä½¿ç”¨è§¦æ‘¸äº‹ä»¶è§¦å‘

å¦‚æœæ‚¨æƒ³è®©ç©å®¶é€šè¿‡æ¥è§¦æŸä¸ªç‰©ä½“æ¥è§¦å‘åœºæ™¯åˆ‡æ¢ï¼š

**åœºæ™¯2çš„è§¦å‘ç‰©ï¼ˆä¾‹å¦‚ï¼šæ£®æ—æ·±å¤„æ ‡è®°ï¼‰**ï¼š
```go
onStart => {
    hide
}

onBackdrop "scene2", => {
    show
    setXYpos 200, 0
}

onTouchStart "LittleRedRidingHood", => {
    say "è¿›å…¥æ£®æ—æ·±å¤„...", 1
    broadcast "switchToScene3"
    hide
}

onBackdrop "scene3", => {
    hide
}
```

---

#### ğŸ® å®Œæ•´çš„3åœºæ™¯æµç¨‹ç¤ºä¾‹

```go
// ========== main.spx ==========
var currentScene = 1

onStart => {
    setBackdrop "scene1"
    say "ç¬¬ä¸€å¹•ï¼šå‘½è¿çš„ç›¸é‡", 3
}

onMsg "toScene2", => {
    setBackdropAndWait "scene2"
    currentScene = 2
    say "åœºæ™¯2ï¼šé»‘æš—çš„ä¾µè¢­", 2
}

onMsg "toScene3", => {
    setBackdropAndWait "scene3"
    currentScene = 3
    say "åœºæ™¯3ï¼šç¬¬ä¸€æ¬¡äº¤é”‹", 2
}

// ========== å¥¶å¥¶ç²¾çµ ==========
onStart => {
    show
    setXYpos -180, 120
}

onStart => {
    say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
    wait 2
    say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 2
    wait 2
    say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 2
    wait 2
    
    stepTo "è‰3"
    wait 1
    
    broadcast "toScene2"
}

onMsg "toScene2", => {
    hide
}

onMsg "toScene3", => {
    hide
}

// ========== ç°å¤ªç‹¼ç²¾çµ ==========
onStart => {
    hide
}

onMsg "toScene2", => {
    show
    setXYpos 100, 50
    
    wait 3
    say "æ£®æ—å¼€å§‹å‡ºç°å¼‚å¸¸ç°è±¡...", 2
    wait 2
    say "æˆ‘è¢«é»‘æš—å·«å¸ˆæ§åˆ¶äº†...", 2
    wait 3
    
    say "å¿…é¡»å¤ºå–å®ˆæŠ¤è€…å¾½ç« ï¼", 2
    wait 2
    
    broadcast "toScene3"
}

onMsg "toScene3", => {
    show
    setXYpos 150, 100
    say "äº¤å‡ºå¾½ç« ï¼", 2
    
    forever => {
        turnTo "LittleRedRidingHood"
        step 3
        wait 0.1
    }
}

// ========== å°çº¢å¸½ç²¾çµ ==========
onStart => {
    show
    setXYpos -100, -50
}

onKey KeyUp, => {
    changeYpos 5
}

onKey KeyDown, => {
    changeYpos -5
}

onKey KeyLeft, => {
    changeXpos -5
}

onKey KeyRight, => {
    changeXpos 5
}

onMsg "toScene2", => {
    setXYpos -50, 0
}

onMsg "toScene3", => {
    setXYpos -100, 0
}
```

---

#### ğŸ“‹ åœºæ™¯åˆ‡æ¢æµç¨‹å›¾

```
åœºæ™¯1 (scene1)
    â†“
å¥¶å¥¶è¯´å®Œè¯å
    â†“
broadcast "toScene2"
    â†“
åœºæ™¯2 (scene2)
    â†“
ç°å¤ªç‹¼å‡ºç°å¹¶è¯´è¯
    â†“
broadcast "toScene3"
    â†“
åœºæ™¯3 (scene3)
    â†“
å¼€å§‹æˆ˜æ–—
```

---

#### ğŸ”§ ä¿®æ­£æ‚¨çš„ä»£ç 

åŸºäºæ‚¨çš„ä»£ç ï¼Œè¿™æ˜¯æ­£ç¡®çš„å†™æ³•ï¼š

```go
// ========== å¥¶å¥¶ç²¾çµï¼ˆæ­£ç¡®ç‰ˆæœ¬ï¼‰==========

// onStart å¤„ç†åˆå§‹åŒ–å’Œå‰§æƒ…
onStart => {
    show
    say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 2
    wait 2                      // âœ… æ”¹ä¸º wait 2
    say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1
    wait 1                      // âœ… æ”¹ä¸º wait 1
    say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 1
    wait 1                      // âœ… æ”¹ä¸º wait 1
    
    stepTo "è‰3"
    wait 1
    
    broadcast "switchToScene2"  // âœ… è§¦å‘åœºæ™¯åˆ‡æ¢
}

// onBackdrop å¿…é¡»åœ¨å¤–é¢ï¼Œä¸èƒ½åµŒå¥—
onBackdrop "scene2", => {      // âœ… æ­£ç¡®ä½ç½®
    hide                        // scene2æ—¶éšè—å¥¶å¥¶
}

onBackdrop "scene3", => {
    hide                        // scene3æ—¶ä¹Ÿéšè—å¥¶å¥¶
}

onBackdrop "scene1", => {
    show                        // å¦‚æœåˆ‡å›scene1ï¼Œæ˜¾ç¤ºå¥¶å¥¶
}
```

```go
// ========== main.spxï¼ˆæ¸¸æˆä¸»é€»è¾‘ï¼‰==========

onStart => {
    setBackdrop "scene1"
}

onMsg "switchToScene2", => {
    wait 1
    setBackdropAndWait "scene2"
    say "æ£®æ—å¼€å§‹å‡ºç°å¼‚å¸¸ç°è±¡...", 2
}

onMsg "switchToScene3", => {
    wait 1
    setBackdropAndWait "scene3"
    say "åœºæ™¯3ï¼šç¬¬ä¸€æ¬¡äº¤é”‹", 2
}
```

---

#### ğŸ’¡ å…³é”®è¦ç‚¹

1. **äº‹ä»¶å¤„ç†å™¨ä¸èƒ½åµŒå¥—**
   ```go
   // âŒ é”™è¯¯
   onStart => {
       onBackdrop "scene2", => {}  // ä¸èƒ½åµŒå¥—
   }
   
   // âœ… æ­£ç¡®
   onStart => {
       // åˆå§‹åŒ–ä»£ç 
   }
   
   onBackdrop "scene2", => {
       // åœºæ™¯2çš„ä»£ç 
   }
   ```

2. **ä½¿ç”¨æ¶ˆæ¯å¹¿æ’­è§¦å‘åœºæ™¯åˆ‡æ¢**
   ```go
   broadcast "switchToScene2"   // å‘é€æ¶ˆæ¯
   broadcast "switchToScene3"   // å‘é€æ¶ˆæ¯
   ```

3. **åœ¨ main.spx ç›‘å¬æ¶ˆæ¯å¹¶åˆ‡æ¢åœºæ™¯**
   ```go
   onMsg "switchToScene2", => {
       setBackdropAndWait "scene2"
   }
   ```

4. **ç²¾çµç›‘å¬åœºæ™¯åˆ‡æ¢å¹¶æ§åˆ¶æ˜¾ç¤º/éšè—**
   ```go
   onBackdrop "scene2", => {
       show    // æˆ– hide
   }
   ```

---

#### ğŸ“š åœºæ™¯åˆ‡æ¢APIæ€»ç»“

| æ“ä½œ | ä»£ç ç¤ºä¾‹ | è¯´æ˜ |
|------|----------|------|
| åˆ‡æ¢åˆ°scene2 | `setBackdrop "scene2"` | ç«‹å³åˆ‡æ¢ |
| åˆ‡æ¢åˆ°scene3ï¼ˆç­‰å¾…ï¼‰ | `setBackdropAndWait "scene3"` | ç­‰å¾…ç›¸å…³äº‹ä»¶å®Œæˆ |
| è§¦å‘åˆ‡æ¢ | `broadcast "toScene3"` | é€šè¿‡æ¶ˆæ¯è§¦å‘ |
| ç›‘å¬åœºæ™¯ | `onBackdrop "scene3", => {}` | åœºæ™¯åˆ‡æ¢æ—¶æ‰§è¡Œ |
| ç›‘å¬æ¶ˆæ¯ | `onMsg "toScene3", => {}` | æ”¶åˆ°æ¶ˆæ¯æ—¶æ‰§è¡Œ |

---

å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„æŒ‡å—èƒ½å¸®åŠ©æ‚¨å®ç°å®Œç¾çš„åœºæ™¯åˆ‡æ¢ï¼å¦‚æœè¿˜æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç»§ç»­æé—®ã€‚ğŸ®

---

**@Jenny-Zeng** (Oct 25, 04:39)
@xgopilot  åŸºäºxbuilder api å®ç°å¦‚ä½•è®©ç²¾çµæ—‹è½¬ï¼Œå¦‚ä½•å®ç°è®©ç²¾çµä»å¤©è€Œé™ /code ä¸€ä¸‹

---

**@xgopilot** (Oct 25, 04:39)
### âœ… å·²å®Œæˆç²¾çµæ—‹è½¬å’Œä»å¤©è€Œé™çš„ç¤ºä¾‹å®ç°

æˆ‘å·²ç»åˆ›å»ºäº†ä¸¤ä¸ª SPX API ç¤ºä¾‹æ¥æ¼”ç¤ºæ‚¨éœ€è¦çš„åŠŸèƒ½ï¼š

---

### ğŸ“ ç¤ºä¾‹ 1: ç²¾çµæ—‹è½¬ (`examples/sprite-rotation/`)

**å®ç°çš„æ•ˆæœ:**
- âœ¨ è‡ªåŠ¨è¿ç»­æ—‹è½¬ - æ¸¸æˆå¯åŠ¨æ—¶ç²¾çµè‡ªåŠ¨æ—‹è½¬
- ğŸ® æŒ‰ç©ºæ ¼é”® - è§¦å‘è¿ç»­æ—‹è½¬åŠ¨ç”»
- ğŸ”„ æŒ‰ R é”® - æ¼”ç¤ºç²¾çµæœå‘å››ä¸ªæ–¹å‘æ—‹è½¬ï¼ˆä¸Šâ†’å³â†’ä¸‹â†’å·¦ï¼‰

**ä½¿ç”¨çš„å…³é”® API:**
- `turn Right, 5` - å‘å³æ—‹è½¬ï¼Œé€Ÿåº¦ä¸º 5
- `changeHeading 10` - æ”¹å˜æœå‘è§’åº¦ 10 åº¦
- `setHeading Up/Right/Down/Left` - è®¾ç½®æœå‘ç‰¹å®šæ–¹å‘

---

### ğŸ“ ç¤ºä¾‹ 2: ç²¾çµä»å¤©è€Œé™ (`examples/sprite-falling/`)

**å®ç°çš„æ•ˆæœ:**
- ğŸ¬ è‡ªåŠ¨å¼€å§‹ - æ¸¸æˆå¯åŠ¨æ—¶ç²¾çµä» y=200 ä½ç½®å¼€å§‹ä¸‹è½
- ğŸŒ æŒ‰ç©ºæ ¼é”® - ä½¿ç”¨ç‰©ç†å¼•æ“çš„é‡åŠ›æ•ˆæœè‡ªç„¶ä¸‹è½
- âœˆï¸ æŒ‰ G é”® - å¹³æ»‘æ»‘è¡Œä¸‹è½ï¼ˆ2ç§’å†…ä¸‹è½åˆ°ç›®æ ‡ä½ç½®ï¼‰
- ğŸš€ æŒ‰ V é”® - å¸¦åˆå§‹é€Ÿåº¦ä¸‹è½
- ğŸ”„ æŒ‰ R é”® - é‡ç½®ç²¾çµåˆ°åˆå§‹ä½ç½®

**ä½¿ç”¨çš„å…³é”® API:**
- `changeYpos -4` - é€æ­¥æ”¹å˜ Y åæ ‡å®ç°ä¸‹è½
- `setPhysicsMode DynamicPhysics` - å¯ç”¨åŠ¨æ€ç‰©ç†æ¨¡å¼
- `setGravity 2` - è®¾ç½®é‡åŠ›å€¼ä¸º 2 å€
- `setVelocity 0, -100` - è®¾ç½®å‘ä¸‹é€Ÿåº¦
- `glide 0, -150, 2` - åœ¨ 2 ç§’å†…æ»‘è¡Œåˆ°ç›®æ ‡ä½ç½®

---

### ğŸ“Š æ–‡ä»¶ç»“æ„

```
examples/
â”œâ”€â”€ README.md                    # ç¤ºä¾‹æ€»è§ˆæ–‡æ¡£
â”œâ”€â”€ sprite-rotation/
â”‚   â”œâ”€â”€ main.spx                # æ—‹è½¬ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ README.md               # è¯¦ç»†ä½¿ç”¨è¯´æ˜
â””â”€â”€ sprite-falling/
    â”œâ”€â”€ main.spx                # ä¸‹è½ç¤ºä¾‹ä»£ç 
    â””â”€â”€ README.md               # è¯¦ç»†ä½¿ç”¨è¯´æ˜
```

æ¯ä¸ªç¤ºä¾‹éƒ½åŒ…å«ï¼š
- å¯è¿è¡Œçš„ `.spx` ä»£ç æ–‡ä»¶
- è¯¦ç»†çš„ä¸­æ–‡è¯´æ˜æ–‡æ¡£
- API ä½¿ç”¨è¯´æ˜å’ŒåŠŸèƒ½ä»‹ç»

---

### ğŸ”— ç›¸å…³é“¾æ¥

- **Pull Request**: [#9](https://github.com/zhixingbox/zhixing/pull/9)
- **åˆ†æ”¯**: `xgopilot/claude/issue-6-1761367165`

æ‚¨å¯ä»¥ç›´æ¥å°†è¿™äº›ç¤ºä¾‹åŠ è½½åˆ° SPX æ¸¸æˆå¼•æ“ä¸­è¿è¡Œæµ‹è¯•ï¼å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è°ƒæ•´ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚

---

**@Jenny-Zeng** (Oct 25, 07:09)
@xgopilot å¦‚ä½•è®¾ç½®è®©èˆå°æ»åæ’­æ”¾ï¼Œè®©èˆå°åœ¨ç²¾çµæ’­æ”¾å®Œæ¯•åæ’­æ”¾ï¼Œ/code ä¸€ä¸‹

// åˆå§‹åŒ–æ¸¸æˆï¼Œåˆ›å»ºè§’è‰²å¹¶è®¾ç½®åˆå§‹åœºæ™¯
onStart => {
	// 1. åˆ›å»ºå°çº¢å¸½ç²¾çµ
	// ç²¾çµå·²ç»åœ¨é¡¹ç›®ä¸­åˆ›å»ºå¥½äº†ï¼Œç›´æ¥ä½¿ç”¨å³å¯
	redHood.setXYpos 0, -30
	redHood.show

	wolf.setXYpos 160, 20
	wolf.show

	// åˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªåœºæ™¯
	setBackdrop "moonlight_lake"
}

onBackdrop "moonlight_lake", => {
	// ç¯å¢ƒè®¾ç½®
	setGraphicEffect ColorEffect, 30
	play "bgm", true
	setVolume 40 // è®¾ç½®éŸ³é‡ä¸º 50%ï¼ˆèŒƒå›´ 0-100ï¼‰

	// éšè—é­”æ³•é¹¿
	magicDeer.hide
	magicWater.hide
	cureHerb.hide
	// è®¾ç½®è§’è‰²ä½ç½®
	redHood.setXYpos 0, -30
	wolf.setXYpos 160, -20
	play "é›·å£°"

	// å‡€åŒ–é­”æ³•å‰§æƒ…
	// å…ˆè®© wolf æ™ƒåŠ¨è¡¨ç¤ºæŒ£æ‰
	// å…ˆè®© wolf æ™ƒåŠ¨è¡¨ç¤ºæŒ£æ‰ï¼Œå¹¶æ·»åŠ é—ªçƒæ•ˆæœ
	repeat 25, => {
		wolf.changeXpos -2
		wolf.changeGraphicEffect ColorEffect, -80 // é—ªçƒå˜æš—
		wait 0.01
		wolf.changeXpos 3
		wolf.changeGraphicEffect ColorEffect, 0 // é—ªçƒå˜äº®
		wait 0.01
		wolf.changeXpos -2
		wolf.changeGraphicEffect ColorEffect, -60 // å†æ¬¡å˜æš—
		wait 0.01
		wolf.clearGraphicEffects // æ¢å¤æ­£å¸¸
		wait 0.01
	}

	// æ™ƒåŠ¨ç»“æŸåç­‰å¾…ä½ç½®ç¨³å®šå†è¯´è¯
	wait 0.3
	wolf.say "å¿«...å¿«èµ°...æˆ‘æ§åˆ¶ä¸äº†è‡ªå·±...", 2

	wait 1
	redHood.say "ä¹Ÿè®¸...æˆ‘å¯ä»¥å¸®ä½ ã€‚", 2
	redHood.say " è¿™æ˜¯æ£®æ—å®ˆæŠ¤è€…å¥¶å¥¶ç»™æˆ‘çš„é­”æ³•éœ²æ°´", 2

	wait 1

	// æ˜¾ç¤ºé­”æ³•æ°´ç“¶å¹¶ç§»åŠ¨åˆ°ç‹¼çš„ä½ç½®
	magicWater.setXYpos 0, 230
	magicWater.show
	magicWater.glide 120, 10, 1.5

	// å‡€åŒ–æ•ˆæœ
	wolf.changeGraphicEffect ColorEffect, 0
	play "æ°´æ»´å£°"
	wait 3

	// éšè—æ°´ç“¶
	magicWater.hide

	// çœŸç›¸å¯¹è¯
	wolf.say "å¤š...è°¢è°¢ä½ ã€‚æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰æ¸…é†’è¿‡äº†ã€‚", 2
	wait 1
	redHood.say "åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ", 1.5
	// wait 1
	wolf.say "æˆ‘æ˜¯ç‹¼æ—ç‹å­ç°äº‘ï¼Œé»‘æš—å·«å¸ˆæ§åˆ¶äº†æˆ‘ï¼Œé€¼æˆ‘å¤ºå–å¾½ç« ã€‚", 3

	// wait 1
	redHood.say "é‚£æˆ‘ä»¬è”æ‰‹å§ï¼ä¸€èµ·æ‰“è´¥é»‘æš—å·«å¸ˆï¼", 2
	wolf.say "å¥½ï¼æˆ‘çŸ¥é“ä»–çš„é˜´è°‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å‡€åŒ–è‰è¯å½»åº•è§£é™¤æ§åˆ¶ã€‚", 3

	// åœºæ™¯è¿‡æ¸¡
	wait 1
	// stopPlaying "calm_moonlight_music"
	setBackdrop "moonlight_lake2"
}

onBackdrop "moonlight_lake2", => {
	// ç¯å¢ƒè®¾ç½®

	// è®¾ç½®è§’è‰²åˆå§‹ä½ç½®ï¼ˆåœ¨å±å¹•å³ä¾§ï¼‰
	magicDeer.setXYpos 60, 10
	redHood.setXYpos -20, 10
	wolf.setXYpos 140, 10

	// å…ˆéšè—è‰è¯ï¼Œç¨ååœ¨å·¦ä¾§æ˜¾ç¤º
	cureHerb.hide
	cureHerb.setXYpos -150, 10

	// æ˜¾ç¤ºæ‰€æœ‰è§’è‰²
	// magicDeer ç¥è¯èˆ¬æ…¢æ…¢æ˜¾ç°
	magicDeer.show
	magicDeer.setGraphicEffect GhostEffect, 100 // å…ˆå®Œå…¨é€æ˜

	// é€æ¸æ˜¾ç°ï¼ˆä»é€æ˜åˆ°å¯è§ï¼‰
	repeat 20, => {
		magicDeer.changeGraphicEffect GhostEffect, -5 // æ¯æ¬¡å‡å°‘ 5% é€æ˜åº¦
		wait 0.05
	}

	// ç¡®ä¿å®Œå…¨å¯è§
	magicDeer.clearGraphicEffects
	redHood.show
	wolf.show

	wait 1

	// å…ˆè¯´è¯ï¼Œç­‰å¯¹è¯å®Œå…¨ç»“æŸ
	redHood.say "ä½ å°±æ˜¯ä¼ è¯´ä¸­çš„ç¥é¹¿ï¼Ÿ", 1.5

	redHood.say "æˆ‘ä»¬æ˜¯æ¥å¯»æ‰¾å‡€åŒ–è‰è¯çš„ï¼Œä¸ºäº†æ‰“è´¥é»‘æš—å·«å¸ˆï¼", 2.5
	magicDeer.say "æˆ‘å¯ä»¥æŒ‡å¼•ä½ ä»¬è‰è¯çš„ä½ç½®", 3

	play "è‰åœ°è¡Œèµ°"
	// magicDeer å…ˆå‘å·¦ç§»åŠ¨
	magicDeer.setVelocity -80, 0

	// ç­‰å¾… magicDeer èµ°åˆ°æœ€å·¦è¾¹ï¼ˆç§»åŠ¨çº¦ 4 ç§’ï¼Œåˆ°è¾¾å±å¹•å·¦ä¾§ï¼‰
	wait 2

	// magicDeer åœä¸‹æ¥
	magicDeer.setVelocity 0, 0

	// redHood è½¬èº«å‘å·¦ï¼ˆé•œåƒç¿»è½¬ï¼‰
	redHood.setRotationStyle LeftRight
	redHood.setHeading Left
	wait 0.5

	// redHood è½¬èº«å‘å·¦
	redHood.setHeading Left
	wait 0.5

	// æ‰€æœ‰äººç‰©ä¸€èµ·å‘å·¦ç§»åŠ¨ï¼Œèµ°å‡ºå±å¹•
	magicDeer.setVelocity -80, 0
	redHood.setVelocity -80, 0
	wolf.setVelocity -80, 0

	// ç§»åŠ¨è¶³å¤Ÿé•¿æ—¶é—´ï¼Œè®©è§’è‰²å®Œå…¨èµ°å‡ºå±å¹•ï¼ˆå†ç§»åŠ¨çº¦ 5 ç§’ï¼‰
	wait 2.5

	// åœæ­¢ç§»åŠ¨
	magicDeer.setVelocity 0, 0
	redHood.setVelocity 0, 0
	wolf.setVelocity 0, 0

	// åˆ‡æ¢åˆ°æ–°èƒŒæ™¯
	setBackdrop "moonlight_lake3"
}

onBackdrop "moonlight_lake3", => {
	// è®¾ç½®è§’è‰²åœ¨å±å¹•æ­£ä¸­
	magicDeer.setXYpos 0, 10
	redHood.setXYpos -80, 10
	wolf.setXYpos 80, 10
	// redHood è½¬èº«å‘å·¦ï¼ˆé•œåƒç¿»è½¬ï¼‰
	redHood.setRotationStyle LeftRight
	redHood.setHeading Right
	wait 0.5

	// è®¾ç½®è‰è¯ä½ç½®ï¼ˆåœ¨è§’è‰²é™„è¿‘ï¼‰
	cureHerb.setXYpos 0, -50
	cureHerb.hide

	// æ˜¾ç¤ºæ‰€æœ‰è§’è‰²
	magicDeer.show
	redHood.show
	wolf.show

	wait 1

	// å‘ç°è‰è¯çš„å‰§æƒ…
	play "è·å¾—å®çŸ³"
	play "è·å¾—å®çŸ³"
	redHood.say "çœ‹ï¼é‚£é‡Œæœ‰ä¸€æ ªå‘å…‰çš„è‰è¯ï¼æœ‰äº†å®ƒï¼Œä½ å°±èƒ½åŒ–è§£è¯…å’’", 2
	wait 0.5

	// æ˜¾ç¤ºè‰è¯å¹¶æ·»åŠ å‘å…‰æ•ˆæœ
	cureHerb.show
	cureHerb.setGraphicEffect ColorEffect, -50

	// magicDeer è½¬èº«å‘å³
	magicDeer.setHeading Right
	wait 0.5

	// magicDeer å‘å³èµ°å‡ºå±å¹•
	magicDeer.setVelocity 80, 0

	// ç­‰å¾… magicDeer èµ°å‡ºå±å¹•ï¼ˆå‡è®¾éœ€è¦ç§»åŠ¨çº¦ 8 ç§’ï¼‰
	wait 5

	// åœæ­¢ç§»åŠ¨
	magicDeer.setVelocity 0, 0

	// è‰è¯æ»‘åŠ¨åˆ° wolf çš„æ‰‹ä¸Š
	cureHerb.glide wolf, 1.5
	wait 0.5

	// è‰è¯æ¶ˆå¤±
	cureHerb.hide

	// å»ºç«‹ä¿¡ä»»çš„äº’åŠ¨
	wolf.say "å¤šäºäº†ä½ ï¼Œæˆ‘æ‰èƒ½ç¦»æ‘†è„±æ§åˆ¶æ›´è¿›ä¸€æ­¥ã€‚", 2.5
	wait 0.5
	redHood.say "æˆ‘ä»¬æ˜¯æ­æ¡£å˜›ï¼", 2

	//   wolf.animate "collect_herb", true;
	//   wait 2;
	//   wolf.stopAnimation "collect_herb";
	//   cureHerb.hide();

	//   // åœºæ™¯è¿‡æ¸¡
	wait 1
	//   stop "adventure_music";
	//   setBackdropAndWait "wolf_clan_ruins";
}


---

**@xgopilot** (Oct 25, 07:10)
### èˆå°æ»åæ’­æ”¾è§£å†³æ–¹æ¡ˆ

æ ¹æ®æ‚¨çš„ä»£ç ï¼Œæ‚¨æƒ³åœ¨ç²¾çµå®Œæˆæ‰€æœ‰åŠ¨ä½œå’Œå¯¹è¯åå†åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªèˆå°ã€‚å…³é”®æ˜¯è¦**ç­‰å¾…æ‰€æœ‰ç²¾çµçš„æ“ä½œå®Œæˆ**å†åˆ‡æ¢åœºæ™¯ã€‚

---

#### ğŸ” é—®é¢˜åˆ†æ

æ‚¨çš„ä»£ç ä¸­ï¼Œ`onBackdrop` äº‹ä»¶å¤„ç†å™¨ä¼šåœ¨èˆå°åˆ‡æ¢å**ç«‹å³æ‰§è¡Œ**æ‰€æœ‰ä»£ç ã€‚è¿™æ„å‘³ç€èˆå°çš„ç¯å¢ƒè®¾ç½®å’Œç²¾çµåŠ¨ç”»ä¼š**åŒæ—¶è¿›è¡Œ**ï¼Œè€Œä¸æ˜¯ç­‰å¾…ç²¾çµå®Œæˆåå†è¿›è¡Œèˆå°æ“ä½œã€‚

---

#### âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ¶ˆæ¯å¹¿æ’­æ§åˆ¶æ—¶åº

**æ ¸å¿ƒæ€è·¯**ï¼š
1. ç²¾çµå®Œæˆæ‰€æœ‰åŠ¨ä½œåå‘é€æ¶ˆæ¯
2. èˆå°ç›‘å¬æ¶ˆæ¯åå†æ‰§è¡Œåç»­æ“ä½œæˆ–åˆ‡æ¢ä¸‹ä¸€ä¸ªåœºæ™¯

---

#### ğŸ’¡ æ–¹æ³•ä¸€ï¼šç²¾çµå®Œæˆåå†åˆ‡æ¢èˆå°ï¼ˆæ¨èï¼‰

**æ¸¸æˆä¸»é€»è¾‘ï¼ˆmain.spxï¼‰**ï¼š
```go
onStart => {
    redHood.setXYpos 0, -30
    redHood.show
    
    wolf.setXYpos 160, 20
    wolf.show
    
    setBackdrop "moonlight_lake"
}

onBackdrop "moonlight_lake", => {
    // ä»…è®¾ç½®ç¯å¢ƒ
    setGraphicEffect ColorEffect, 30
    play "bgm", true
    setVolume 40
    play "é›·å£°"
    
    magicDeer.hide
    magicWater.hide
    cureHerb.hide
    
    // å¹¿æ’­æ¶ˆæ¯ï¼Œè®©ç²¾çµå¼€å§‹è¡¨æ¼”
    broadcast "startMoonlightScene"
}

// ç›‘å¬ç²¾çµå®Œæˆçš„æ¶ˆæ¯ï¼Œå†åˆ‡æ¢ä¸‹ä¸€ä¸ªèˆå°
onMsg "moonlightSceneComplete", => {
    wait 1
    setBackdrop "moonlight_lake2"
}

onBackdrop "moonlight_lake2", => {
    // è®¾ç½®è§’è‰²åˆå§‹ä½ç½®
    magicDeer.setXYpos 60, 10
    redHood.setXYpos -20, 10
    wolf.setXYpos 140, 10
    
    cureHerb.hide
    cureHerb.setXYpos -150, 10
    
    // å¹¿æ’­æ¶ˆæ¯ï¼Œè®©ç²¾çµå¼€å§‹è¡¨æ¼”
    broadcast "startDeerScene"
}

onMsg "deerSceneComplete", => {
    wait 1
    setBackdrop "moonlight_lake3"
}

onBackdrop "moonlight_lake3", => {
    magicDeer.setXYpos 0, 10
    redHood.setXYpos -80, 10
    wolf.setXYpos 80, 10
    
    cureHerb.setXYpos 0, -50
    cureHerb.hide
    
    magicDeer.show
    redHood.show
    wolf.show
    
    // å¹¿æ’­æ¶ˆæ¯ï¼Œè®©ç²¾çµå¼€å§‹è¡¨æ¼”
    broadcast "startHerbScene"
}
```

**Wolf ç²¾çµ**ï¼š
```go
onMsg "startMoonlightScene", => {
    // æ‰€æœ‰ wolf çš„åŠ¨ä½œå’Œå¯¹è¯
    repeat 25, => {
        changeXpos -2
        changeGraphicEffect ColorEffect, -80
        wait 0.01
        changeXpos 3
        changeGraphicEffect ColorEffect, 0
        wait 0.01
        changeXpos -2
        changeGraphicEffect ColorEffect, -60
        wait 0.01
        clearGraphicEffects
        wait 0.01
    }
    
    wait 0.3
    say "å¿«...å¿«èµ°...æˆ‘æ§åˆ¶ä¸äº†è‡ªå·±...", 2
    wait 3
    
    // ç»§ç»­åç»­å¯¹è¯...
    say "æˆ‘æ˜¯ç‹¼æ—ç‹å­ç°äº‘ï¼Œé»‘æš—å·«å¸ˆæ§åˆ¶äº†æˆ‘ï¼Œé€¼æˆ‘å¤ºå–å¾½ç« ã€‚", 3
    wait 3
    say "å¥½ï¼æˆ‘çŸ¥é“ä»–çš„é˜´è°‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å‡€åŒ–è‰è¯å½»åº•è§£é™¤æ§åˆ¶ã€‚", 3
    wait 3
    
    // æ‰€æœ‰åŠ¨ä½œå®Œæˆï¼Œé€šçŸ¥èˆå°å¯ä»¥åˆ‡æ¢äº†
    broadcast "moonlightSceneComplete"
}
```

**RedHood ç²¾çµ**ï¼š
```go
onMsg "startMoonlightScene", => {
    wait 3  // ç­‰å¾… wolf å…ˆè¯´è¯
    
    say "ä¹Ÿè®¸...æˆ‘å¯ä»¥å¸®ä½ ã€‚", 2
    wait 2
    say "è¿™æ˜¯æ£®æ—å®ˆæŠ¤è€…å¥¶å¥¶ç»™æˆ‘çš„é­”æ³•éœ²æ°´", 2
    wait 3
    
    say "åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ", 1.5
    wait 1.5
    
    say "é‚£æˆ‘ä»¬è”æ‰‹å§ï¼ä¸€èµ·æ‰“è´¥é»‘æš—å·«å¸ˆï¼", 2
    wait 2
}
```

**MagicWater ç²¾çµ**ï¼š
```go
onMsg "startMoonlightScene", => {
    wait 8  // ç­‰å¾…å¯¹è¯
    
    setXYpos 0, 230
    show
    glide 120, 10, 1.5
    wait 3
    
    hide
}
```

---

#### ğŸ’¡ æ–¹æ³•äºŒï¼šä½¿ç”¨ broadcastAndWaitï¼ˆç­‰å¾…ç²¾çµå“åº”å®Œæˆï¼‰

è¿™ä¸ªæ–¹æ³•æ›´ç®€æ´ï¼Œä½¿ç”¨ `broadcastAndWait` å¯ä»¥è‡ªåŠ¨ç­‰å¾…æ‰€æœ‰ç²¾çµçš„ `onMsg` å¤„ç†å™¨å®Œæˆï¼š

```go
onBackdrop "moonlight_lake", => {
    setGraphicEffect ColorEffect, 30
    play "bgm", true
    setVolume 40
    play "é›·å£°"
    
    magicDeer.hide
    magicWater.hide
    cureHerb.hide
    
    // ç­‰å¾…ç²¾çµå®Œæˆæ‰€æœ‰åŠ¨ä½œ
    broadcastAndWait "startMoonlightScene"
    
    // ç²¾çµå®Œæˆåå†åˆ‡æ¢
    wait 1
    setBackdrop "moonlight_lake2"
}
```

---

#### ğŸ’¡ æ–¹æ³•ä¸‰ï¼šç›´æ¥åœ¨ onBackdrop ä¸­æ·»åŠ  waitï¼ˆæœ€ç®€å•ï¼‰

å¦‚æœæ‚¨çŸ¥é“ç²¾çµè¡¨æ¼”éœ€è¦å¤šé•¿æ—¶é—´ï¼Œå¯ä»¥ç›´æ¥åœ¨åˆ‡æ¢èˆå°å‰ç­‰å¾…ï¼š

```go
onBackdrop "moonlight_lake", => {
    // è®¾ç½®ç¯å¢ƒ
    setGraphicEffect ColorEffect, 30
    play "bgm", true
    setVolume 40
    play "é›·å£°"
    
    // æ‰€æœ‰ç²¾çµåŠ¨ä½œ...
    repeat 25, => {
        wolf.changeXpos -2
        wolf.changeGraphicEffect ColorEffect, -80
        wait 0.01
        wolf.changeXpos 3
        wolf.changeGraphicEffect ColorEffect, 0
        wait 0.01
        wolf.changeXpos -2
        wolf.changeGraphicEffect ColorEffect, -60
        wait 0.01
        wolf.clearGraphicEffects
        wait 0.01
    }
    
    wait 0.3
    wolf.say "å¿«...å¿«èµ°...æˆ‘æ§åˆ¶ä¸äº†è‡ªå·±...", 2
    wait 3
    
    redHood.say "ä¹Ÿè®¸...æˆ‘å¯ä»¥å¸®ä½ ã€‚", 2
    wait 2
    redHood.say "è¿™æ˜¯æ£®æ—å®ˆæŠ¤è€…å¥¶å¥¶ç»™æˆ‘çš„é­”æ³•éœ²æ°´", 2
    wait 3
    
    magicWater.setXYpos 0, 230
    magicWater.show
    magicWater.glide 120, 10, 1.5
    wait 3
    
    magicWater.hide
    
    wolf.say "å¤š...è°¢è°¢ä½ ã€‚æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰æ¸…é†’è¿‡äº†ã€‚", 2
    wait 3
    redHood.say "åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ", 1.5
    wait 2
    wolf.say "æˆ‘æ˜¯ç‹¼æ—ç‹å­ç°äº‘ï¼Œé»‘æš—å·«å¸ˆæ§åˆ¶äº†æˆ‘ï¼Œé€¼æˆ‘å¤ºå–å¾½ç« ã€‚", 3
    wait 3
    
    redHood.say "é‚£æˆ‘ä»¬è”æ‰‹å§ï¼ä¸€èµ·æ‰“è´¥é»‘æš—å·«å¸ˆï¼", 2
    wait 2
    wolf.say "å¥½ï¼æˆ‘çŸ¥é“ä»–çš„é˜´è°‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å‡€åŒ–è‰è¯å½»åº•è§£é™¤æ§åˆ¶ã€‚", 3
    wait 3
    
    // âœ… ç­‰å¾…æ‰€æœ‰åŠ¨ä½œå®Œæˆåå†åˆ‡æ¢
    wait 1
    setBackdrop "moonlight_lake2"
}
```

---

#### ğŸ“Š æ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| æ–¹æ³•ä¸€ï¼ˆæ¶ˆæ¯å¹¿æ’­ï¼‰ | ä»£ç æ¸…æ™°ï¼ŒèŒè´£åˆ†ç¦» | ä»£ç è¾ƒå¤š | å¤æ‚åœºæ™¯ï¼Œå¤šç²¾çµåä½œ |
| æ–¹æ³•äºŒï¼ˆbroadcastAndWaitï¼‰ | ç®€æ´ï¼Œè‡ªåŠ¨ç­‰å¾… | éœ€è¦ç†è§£ç­‰å¾…æœºåˆ¶ | ç²¾çµç‹¬ç«‹å®Œæˆä»»åŠ¡ |
| æ–¹æ³•ä¸‰ï¼ˆç›´æ¥ waitï¼‰ | æœ€ç®€å•ç›´æ¥ | æ‰€æœ‰ä»£ç åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œéš¾ç»´æŠ¤ | ç®€å•åœºæ™¯ï¼Œå¿«é€ŸåŸå‹ |

---

#### ğŸ¯ æ¨èæ–¹æ¡ˆ

**å¯¹äºæ‚¨çš„ä»£ç ï¼Œæˆ‘æ¨èæ–¹æ³•äºŒï¼ˆbroadcastAndWaitï¼‰**ï¼Œå› ä¸ºå®ƒç®€æ´ä¸”æ˜“äºç†è§£ï¼š

```go
onBackdrop "moonlight_lake", => {
    // ç¯å¢ƒè®¾ç½®
    setGraphicEffect ColorEffect, 30
    play "bgm", true
    setVolume 40
    play "é›·å£°"
    
    redHood.setXYpos 0, -30
    wolf.setXYpos 160, -20
    
    magicDeer.hide
    magicWater.hide
    cureHerb.hide
    
    // ç­‰å¾…ç²¾çµè¡¨æ¼”å®Œæˆ
    broadcastAndWait "moonlight_lake_action"
    
    // æ‰€æœ‰ç²¾çµå®Œæˆåå†åˆ‡æ¢
    wait 1
    setBackdrop "moonlight_lake2"
}
```

ç„¶ååœ¨å„ä¸ªç²¾çµä¸­ç›‘å¬ `"moonlight_lake_action"` æ¶ˆæ¯å¹¶æ‰§è¡Œå„è‡ªçš„åŠ¨ä½œå³å¯ã€‚

---

#### ğŸ“š ç›¸å…³ API

| API | è¯´æ˜ |
|-----|------|
| `broadcast "msg"` | å¹¿æ’­æ¶ˆæ¯ï¼ˆä¸ç­‰å¾…ï¼‰ |
| `broadcastAndWait "msg"` | å¹¿æ’­æ¶ˆæ¯å¹¶ç­‰å¾…æ‰€æœ‰ç›¸å…³è¡Œä¸ºå®Œæˆ |
| `onMsg "msg", => {}` | ç›‘å¬æ¶ˆæ¯ |
| `wait 1` | ç­‰å¾… 1 ç§’ |

å¸Œæœ›è¿™äº›æ–¹æ¡ˆèƒ½å¸®åŠ©æ‚¨å®ç°èˆå°çš„æ»åæ’­æ”¾æ•ˆæœï¼ğŸ®

---

**@Jenny-Zeng** (Oct 25, 07:27)
@xgopilot åœ¨ä¸Šè¿°ä»£ç ä¸­é¢å¤–ç»‘å®šäº†redhood1è§’è‰²ï¼Œä»£ç å¦‚ä¸‹ï¼Œå¸Œæœ›å…ˆæ‰§è¡Œredhood1ï¼Œå†æ‰§è¡Œä¸Šè¿°ä»£ç 
onStart => {
	//scene1
	show
	play "kasolå°çº¢å¸½æ£®æ—"
	onBackdrop "scene1", => {
		setVolume 50
		redHood1.say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 1.5
		wait 1
		redHood1.say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1.5
		wait 1
		redHood1.say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 2.5
		repeat 4, => {
			turn Right // å‘å³è½¬
			wait 0.2

		}

		// setVolume 50
		// redHood1.say "å°çº¢å¸½ä¸å¥¶å¥¶ç›¸ä¾ä¸ºå‘½", 1.5
		// wait 1
		// redHood1.say "å¥¶å¥¶æ˜¯å‰ä»»æ£®æ—å®ˆæŠ¤è€…ï¼Œå¹´äº‹å·²é«˜", 1.5
		// wait 1
		// redHood1.say "å°çº¢å¸½å¼€å§‹å­¦ä¹ å®ˆæŠ¤è€…çš„æŠ€èƒ½", 2.5
		// repeat 4, => {
		// 	turn Right // å‘å³è½¬
		// 	wait 0.2
	}
	stepTo "grass"
	wait 0.1
	//å°çº¢å¸½æ¶ˆå¤±
	broadcast "scene2"
	hide
	setBackdrop "scene2"
}

//setXYpos -300, -300
//setBackdrop "scene2"
onBackdrop "scene2", => {
	redHood1.hide
}

onBackdrop "scene3", => {
	play "kasolå°çº¢å¸½æ£®æ—"
	setXYpos -180, -20
	redHood1.show
	stepTo "wolf1"
	say "å¤§ç°ç‹¼ï¼Œä½ æ€ä¹ˆäº†ï¼Œä½ æ˜¯ä¸æ˜¯è¢«æ§åˆ¶äº†", 1

	//glide 12, -80, 2
}


---

**@xgopilot** (Oct 25, 07:28)
codeagent is processing your request, please wait a moment...

---

